use std::path::PathBuf;

#[derive(Debug, Clone)]
pub enum Message {
    AddImages,
    AddFolder,
    LoadFolder(PathBuf),  // New: Load folder directly without dialog
    ImagesSelected(Vec<PathBuf>),
    ThumbnailUpdated(PathBuf, iced::widget::image::Handle),
    InternalPathsScanned(Vec<PathBuf>, Vec<PathBuf>, Vec<PathBuf>, Vec<PathBuf>),
    AlignImages,
    AlignImagesConfirmed(bool),
    AlignmentDone(Result<opencv::core::Rect, String>),
    StackImages,
    StackBunches,
    CancelAlignedSelection,
    ToggleAlignedImage(PathBuf),
    StackSelectedAligned,
    SelectAllAligned,
    DeselectAllAligned,
    CancelBunchSelection,
    ToggleBunchImage(PathBuf),
    StackSelectedBunches,
    SelectAllBunches,
    DeselectAllBunches,
    StackingDone(Result<(Vec<u8>, opencv::core::Mat), String>),
    OpenImage(PathBuf),
    OpenImageWithExternalEditor(PathBuf),
    ShowImagePreview(PathBuf, Vec<PathBuf>), // path and list of all images in pane
    ImagePreviewLoaded(PathBuf, iced::widget::image::Handle, bool),
    LoadFullImage(PathBuf),
    CloseImagePreview,
    NextImageInPreview,
    PreviousImageInPreview,
    NavigationThrottleReset,
    RefreshPanes,
    AutoRefreshTick,
    RefreshImportedPane,
    RefreshAlignedPane,
    RefreshBunchesPane,
    RefreshFinalPane,
    // New: Configuration messages
    ToggleSettings,
    ToggleHelp,
    CloseHelp,
    ToggleLog,
    CloseLog,
    ResetToDefaults,
    SharpnessThresholdChanged(f32),
    SharpnessGridSizeChanged(f32),
    SharpnessIqrMultiplierChanged(f32),
    UseAdaptiveBatchSizes(bool),
    UseCLAHE(bool),
    FeatureDetectorChanged(crate::config::FeatureDetector),
    // ECC-specific parameters
    EccMotionTypeChanged(crate::config::EccMotionType),
    EccMaxIterationsChanged(f32),
    EccEpsilonChanged(f32),
    EccGaussFilterSizeChanged(f32),
    EccChunkSizeChanged(f32),
    ProgressUpdate(String, f32),
    // Advanced processing options
    EnableNoiseReduction(bool),
    NoiseReductionStrengthChanged(f32),
    EnableSharpening(bool),
    SharpeningStrengthChanged(f32),
    EnableColorCorrection(bool),
    ContrastBoostChanged(f32),
    BrightnessBoostChanged(f32),
    SaturationBoostChanged(f32),
    // Preview settings
    UseInternalPreview(bool),
    PreviewMaxWidthChanged(f32),
    PreviewMaxHeightChanged(f32),
    ExternalViewerPathChanged(String),
    ExternalEditorPathChanged(String),
    // Scroll position tracking
    ImportedScrollChanged(f32),
    AlignedScrollChanged(f32),
    BunchesScrollChanged(f32),
    FinalScrollChanged(f32),
    // Window resize for responsive layout
    WindowResized(f32, f32),
    Exit,
    None,
}